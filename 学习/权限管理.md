# 权限管理

## 实体说明

1. user 用户
2. object 对象
3. resource 权限/资源
4. role/group 组/角色
5. extens 继承
6. ACL: Access Control List 权限控制表
7. policy 策略

> 其实将上面的每个实体理解了，下面的各种算法都鸡肋，因为算法也是整合这实体关系而以

## 自主访问控制（DAC: Discretionary Access Control）

给某一个用户赋值权限列表，如果该权限为全部，即对某个对象有所有权限，那么该用户，还可以给其它用户继续赋值权限。

优点：简单

缺点：管理起来有点分散，比如 想把一组权限打包，一次赋值给某一个人。

> NTFS 就是这套管理 方式

## 强制访问控制（MAC: Mandatory Access Control）

DAC的升级版，给资源打上ID，可以给某一个用户根据ID，统一分配一组权限

优点：简单，解决了DAC的一些问题

缺点：还是不够灵活

> 适合一些对文件保密要求比较高，特定人只能看特定权限的场景。

## 基于角色的访问控制（RBAC: Role\-Based Access Control\)

权限不直接赋值给用户，而是赋值到特定的角色上，用户再绑定角色，这种就比较灵活了

优点：

1. 可以整组赋值权限不跟用户强绑定

2. 当有人员变更时，修改/维护简单

3. 一个用户可以多种角色，即：多种权限

4. 角色可以继承，即：减少各种操作

缺点：

> 角色其实更像是组，是抽象出一些共性的权限，组成成一个新的角色。比较方便，反正我日常做后台全是这种模式。

问题：既然可以继承、也可以多角色，势必会有冲突，如：一个用户的角色即是运动员又是教练。

职责分离有两种模式：

静态职责分离\(Static Separation of Duty\)：用户无法同时被赋予有冲突的角色。

动态职责分离\(Dynamic Separation of Duty\)：用户在一次会话（Session）中不能同时激活

## 基于属性的权限验证（ABAC: Attribute\-Based Access Control）

例如规则：“允许所有班主任在上课时间自由进出校门”这条规则，其中，“班主任”是用户的角色属性，“上课时间”是环境属性，“进出”是操作属性，而“校门”就是对象属性了。为了实现便捷的规则设置和规则判断执行，ABAC通常有配置文件（XML、YAML等）或DSL配合规则解析引擎使用。

感觉这种方式是最灵活，粒度最小的。不过从没用过也没写过，最常用的还是RBAC，可能是因为太复杂了，成本高，用的少。
