# 音频基础

## 基础

声音：是由物体振动产生的，通过空气、固体、液体等介质进行传输的一种声波，且是连续的。

可听声波：20Hz~20kHz（20Hz~20000Hz）

超声波：\> 20kHz

次声波：\< 20Hz

> 人的发声范围一般是 85Hz~1100Hz。
> 
> 
> 人的耳朵：20KHz~44KHz

音量\(响度/音强\)：声音的大小，分贝。振幅决定

音调：高音、中音、低音，振动频率\(声源1秒钟内振动的次数叫频率\)

音色\(音品\)：发出振动的物体\(声音来源体\)。物理上叫：波形

> 音品:声音的品质，每种类型的物体发出的声音都略有些不同，如：钢琴、吉它、留声机等，基本上都能区分开。

![v2-6f5bd9ad3f327e24cd487b73ea786fde_r.jpg](image/v2-6f5bd9ad3f327e24cd487b73ea786fde_r.jpg)

上图中：

蓝色与红色，振幅是相同，也就是音量是一样的，但是：红色频率要高于蓝色，那么，可能就是高音

黑色与红色，音频差不多，但黑色的音量更高

1. 采样\(频\)率：单位时间内，对声音的采样次数
2. 采样深度：采样后量化的精度，8/16/24，8bit，那就是255种音色
3. 通道数：1/2/3/4/6，单声道/双声道。立体声/环绕声

|采样率     |描述                                                                                                         |
|-----------|-------------------------------------------------------------------------------------------------------------|
|8KHZ       |人说话的频率大概一般在300~700HZ，在语音通话场景就够了                                                        |
|16、32KHZ  |保证基础通话上，进一步提升品质                                                                               |
|44.1、48KHZ|在比如在线KTV、音乐教学等场景，对音质要求比较高，可考虑进一步提升采样率，好像这个使用的最多，主要是节省数量量|
|96、192KHZ |像歌曲、电影、需要二次加工的场景使用这个，但数据量很大                                                       |

> 44.1 往上的阶梯，听力感观其实不太大。

|采样位深|描述                                                                                                                                             |
|--------|-------------------------------------------------------------------------------------------------------------------------------------------------|
|8bit    |可满足基础的通话音质需求                                                                                                                         |
|16bit   |被认为是达到专业音频质量的位深标准，足够完整地收录绝大多数音频场景的动态变化，适用范围广。和44.1KHz采样率一起，被作为CD音质的标准                |
|24 32 64|对于使用常见播放设备（手机、普通音箱）的用户来说，32bit与16bit的感官差异很细微，音质上的提升不明显，反而带来了更大的带宽、存储压力，更不用说64bit|

|通道数|描述                                                          |
|------|--------------------------------------------------------------|
|单通道|最普通的，也是最简单的，最节省数据量，基本够用                |
|双通道|麦克风有2个，扬声器也有2个，这样就有了声音的立体感。          |
|多通道|有2个以上的设备采集/播放，但处理起来也最麻烦，貌似使用的不太多|
|      |                                                              |

> RTC 的场景中，双声道的去回声要比单声道复杂4倍，所以还是单声道的略多些。

1. 码率/比特率：96K/128K/192K/256~320Kbps

> 采样频率 \* 采样精度 \* 通道数 = 音频数据比特率

## PCM

Pulse Code Modulation:脉冲编码调制,把一个时间连续，取值连续的模拟信号变换成时间离散、取值离散的数字信号后在信道中传输。

1937年提出 ，60年代应用于电话上，后续各大公司应用于电脑上。

> 上面是百度的话，我的理解就是：对声音的处理，把模拟信号转换成数据信号。即：将模拟信号转换成电脉冲信号0和1。
> 
> 
> 划重点：数字信号可以供计算机使用

转换过程：

1. 抽样/采样:按照一定时间周期，今次采取若干个点。即：连续信号转成离散信号。
2. 量化：制定一个数字幅度范围\(值\)，将离散信号 转化成 数字幅度值。\(还有 量化误差 降噪\)
3. 编码：将量化后的数字幅度值 转换 为对应的二进制代码

最终产生的数据，是未压缩/未编码的，也叫：裸流

## AAC

Advanced Audio Coding：高级音频编码。出现于1997年，基于MPEG\-2的音频编码技术。\(MPEG\-4规范中都也有定义\)。它是一组音频压缩算法的规范：AAC\-LC，AAC\-LD，AAC\-ELD，HE\-AAC

后缀名：.m4a/.aac

> MPEG4 AAC

它的应用场景跟视频差不多2种：

1. 文件形式，如：MP4
2. 网络流传输，如：RTP/RTMP传输中携带

具体几种封装协议的格式：

1. ADIF：Audio Data Interchange Format 音频数据交换格式 。只能拿到整个文件才能正常播放，想跳播但没拿全文件就略难。适用 用于文件存储

> 这个数据量略小，头文件标识了所有信息，后面跟着全部的 data

1. ADTS：Audio Data Transport Stream 音频数据传输流，允许任意位置播放。适合 流媒体或文件存储

> 每帧都有个头文件，这样就可以跳播，但肯定数据在大一些

1. LOAS\(流媒体\)
2. LATM\(流媒体\)

这个有专利，且收费的

## OPUS

google主推，开源，可免费使用。

后缀名 .opus/.ogg

WEBRTC 就使用的OPUS

## MP3

MP3:Moving Picture Experts Group Audio Layer III。简单的说，MP3就是一种音频压缩技术

由MPEG小组制定于1992年

有损压缩

优点：很早就建立了，大部分播放器都兼容

缺点：在低比特率下有着较差的声音质量表现，尤其是低于64kbps时。同时，由于丢失的音频细节较多，对于一些高音质的歌曲，MP3较难完美地还原。

> 其实还是投产太早，技术跟不上

具说：MPEG\-4中的AAC（Advanced audio coding）将是MP3格式的下一代。

## wma

有损压缩

优点：在低比特率（如64kbps以下）时具有比MP3更好的音质，在128kbps这样的普通比特率下。

缺点：WMA在Windows平台上得到了很好的支持。但是，它与其他平台和各种硬件设备存在一定的兼容性问题，与MP3相比支持相对较少。

## wav

Windows Media Audio

有损压缩

## flac APE wav

无损压缩，基本上所有编码中最大的，但音质也是最好的.

基本都是在 192KHZ 以上，最高到达320K

## 基础总结

声音的采集与播放大多是硬件层面的，知道个大概就行。比如：延迟过高，可能是麦克风采集/生成流的时候，驱动程序加了缓存。调个参数就行

各种编码格式，基本上就是两种场景：本地文件与传输，本地文件没太多好说的，想听高保真就是APE WMV FLAC 这种，想要兼容好就是MP4，WMA也行。

而其 AAC/oups 才是学习的关键，用于网络音流的传输

AAC RTMP、HTTP\-FLV、 HLS 都在用

OPUS 主要是 webRtc在用

感觉还是AAC更火，OPUS略差些，可能是其它大厂不希望GOOGLE 一家独 大吧，另外也可能是AAC更成熟稳定

## AGC

自动增益补偿功能（Automatic Gain Control），AGC可以自动调麦克风的收音量，使与会者收到一定的音量水平，不会因发言者与麦克风的距离改变时，声音有忽大忽小声的缺点。

## ANS

背景噪音抑制功能（Automatic Noise Suppression），ANS可探测出背景固定频率的杂音并消除背景噪音，例如：风扇、空调声自动滤除。呈现出与会者清晰的声音。

## AEC

回声消除器（Acoustic Echo Chancellor）,AEC可以消除各种延迟的回声。

回声消除的原理就是利用接收到的音频与本地采集的音频做对比，添加反相的人造回声，将远端的声音消除。

## 3A总结

都是音频的优化，处理声波的
